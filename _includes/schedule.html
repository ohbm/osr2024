<!-- Begin Schedule Section -->
{% assign schedule = site.data.schedules[page.schedule] %}
<section id="schedule" class="schedule" style="max-width: 1200px; margin: 0 auto;">
    <div class="content-wrapper" style="margin: 0 1em;">
        <h1 style="text-align:center;">{{ page.title }}</h1>
        <br>
        <div style="text-align:center;">
          <label for=timezone>Schedule times are currently displayed in the following time zone:</label>
        </div>
        <br>
        <div style="margin-left: 22%">
            <select style="width: 60%;" id="timezone" data-base-tz="{{ schedule[0].tz }}"></select>
        </div>
        <div style="text-align:center;">
            <p><br><i>Note: <b>Passwords for joining Crowdcast and Gather Town</b> will be sent to <a href="https://ohbm.github.io/osr2020/register/">registered</a> participants.</i></p>
            <p>After registering, you will find passwords in a confirmation email from Eventbrite</p>
        </div>
        <br>

        <div style="text-align: center">
            <ul>
                {% assign count = 1 %}
                {% for day in schedule %}
                <li><b><a href="#{{ count }}">{{ day.dateText }}</a></b></li>
                {% assign count = count | plus: 1 %}
                {% endfor %}

            </ul>
        </div>

        <br>
        
        {% assign count = 1 %}
        {% for day in schedule %}

        <div class="schedule-table">
            <h4 id="{{ count }}" class="schedule-table-heading">{{ day.dateReadable }}</h4>
            {% assign count = count | plus: 1 %}
            <div class="timeslot track-header stick-header">
                <div class="timeslot-elements flexbox-wrapper">
                    {% for track in day.tracks %}
                    {% assign trackColWidth = 12 | divided_by: forloop.length %}
                    <div class="track-header-slot col-md-{{ trackColWidth }} flexbox-item-height hidden-xs">
                        <h5 class="track-header-title">{{ track.title }}</h5>
                    </div>
                    {% endfor %}
                    <div class="track-header-slot col-xs-12 visible-xs">
                        <h5 class="slot-detail track-header-title"></h5>
                    </div>
                </div>
            </div>
            {% for timeslot in day.timeslots %}
            <div class="timeslot" itemtype="http://schema.org/subEvent">
                <div class="timeslot-label">
                    <time class="start-time" data-value="{{ day.date }} {{ timeslot.startTime }}" itemprop="startDate" datetime="{{ day.dateReadable }}T{{ timeslot.startTime }}">
                        {% assign startTime = timeslot.startTime | split: ":" %}
                        {{ startTime[0] }}<span>{{ startTime[1] }}</span>
                    </time>
                      <time class="end-time" data-value="{{ day.date }} {{ timeslot.endTime }}" itemprop="endDate" datetime="{{ day.dateReadable }}T{{ timeslot.endTime }}">
                        {% assign endTime = timeslot.endTime | split: ":" %}
                        {{ endTime[0] }}<span>{{ endTime[1] }}</span>
                    </time>
                </div>
                <div class="timeslot-elements flexbox-wrapper">
                    {% for slot in timeslot.sessionIds %}
                        {% assign slotColWidth = 12 | divided_by: forloop.length %}
                        {% assign slotIndex = forloop.index0 %}
                        {% if slot != 404 %}
                            {% for session in site.data.sessions %}
                                {% if slot == session.id and session.service == null %}
                                <div id="session-{{ session.id }}" class="slot col-md-{{ slotColWidth }} col-xs-12 flexbox-item-height" data-slot-detail="{{ day.tracks[slotIndex].title }}" data-toggle="modal" data-target="#sessionDetail-{{ session.id }}">
                                    <div class="color-line" style="background: {{ day.tracks[slotIndex].color }}"></div>
                                    <div class="slot-content" style="border-right-color: {{ day.tracks[slotIndex].color }}">
                                        <h5 class="slot-title" itemprop="name">{{ session.title }}</h5>
                                        <span class="slot-language">{{session.language | upcase}}</span>
                                        {% if session.description != null %}
                                        <p class="service-description"><b>{{ session.description }}</b> </p>
                                        {% endif %}
                                        <ul class="slot-speakers">
                                            {% for speaker in site.data.speakers %}
                                                {% for session_speaker in session.speakers %}
                                                    {% if session_speaker == speaker.id %}
                                                    <li itemprop="performer"><div class="speaker-img flow-img img-circle" style="background-image: url({{ site.baseurl | append: '/img/people/' | append: speaker.thumbnailUrl }})"></div>

                                                    <p class="speaker-name">{{ speaker.name }}
                                                        <span class="speaker-position">{{ speaker.title }}</span>
                                                    </p>
                                                    </li>
                                                    {% endif %}
                                                {% endfor %}
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                                {% elsif slot == session.id and session.service != null %}
                                <div class="slot col-md-{{ slotColWidth }} col-xs-12 service-slot flexbox-item-height" data-slot-detail="{{ session.place }}">
                                    <div class="color-line"></div>
                                    <div class="slot-content">
                                        <h5 class="slot-title" itemprop="name">{{ session.title }}</h5>
                                        {% if session.description != null %}
                                        <p class="service-description">{{ session.description | markdownify }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                        <div class="slot col-md-{{ slotColWidth }} hidden-xs blank-col flexbox-item-height"></div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</section>
<!-- End Schedule Section -->
